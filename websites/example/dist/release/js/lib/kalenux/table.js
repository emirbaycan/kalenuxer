var table_start=0,table_limit=10,table_page=1;function refreshTable(){var e,t;for(("undefined"!=typeof table_corder?table.DataTable().order(table_corder):0!==table_order?("object"!=typeof table_order&&(table_order=table_order.split(" ")),table.DataTable().order(table_order)):table.DataTable()).draw(),t=(e=table[0].getElementsByTagName("th")).length,i=0;i<t;i++)e[i].onclick=tableSetOrder.bind(null,table)}function tableSetOrder(e){var t,a=e.DataTable().order(),l=[];for(t in table_corder=a)t=a[t],l.push(t[0]+" "+table_sorts_r[t[1]]);l=l.join(","),table_order=l,filterTable()}function setNav(e){var t,a,l=table_navs.dataset.count/table_limit,r=Math.ceil(l);switch(e){case"-2":if(1==table_page)return;table_start=0,a=1;break;case"-1":if(table_start<table_limit)return void(table_start=0);table_start-=table_limit,a=Math.ceil(table_start/table_limit)+1;break;case"0":table_start=0,a=1;break;case"+1":if(r<(a=Math.ceil((table_start+table_limit)/table_limit)+1))return;table_start+=table_limit;break;case"+2":if(t=Math.floor(l),table_start=t*table_limit-table_limit*(r!=t?0:1),a=Math.ceil(table_start/table_limit)+1,table_page==a)return;break;default:if(table_page==e)return;table_start=(e-1)*table_limit,a=e}table_page=a,getOrders()}function setNavs(){var e,t,a,l,r,n;for(n=table_navs.dataset.count/table_limit,e=Math.ceil(n),t=table_page,table_navs.innerHTML="",a=t+5,l=t-5,r=1;r<=e;r++)a<r&&r!==e||r<l&&1!==r||(n=document.createElement("li"),r==t?table_navs.parentNode.dataset.page=r!=e?r:-1:0,n.className="page-item ",n.dataset.active=1,n.innerHTML="<button>"+r+"</button>",n.onclick=setNav.bind(null,r),table_navs.appendChild(n))}function getOrders(){var e,t,a,l,r={start:table_start,limit:table_limit};for(e in"undefined"!=typeof specialPosts&&(r=Object.assign({},r,specialPosts())),"undefined"!=typeof table_order&&(r.order=table_order),l=table_filters.dataset.filters.split(","))(e=l[e])&&""!=(t=(e=$("#"+e)).val())&&0!=t&&("limit"==(a=e[0].dataset.name)&&(table_limit=parseInt(t)),r[a]=t);postJSON(table_url,function(e){1===e.result?setOrders(e):table_navs.parentNode.dataset.state="opage"},r)}function setOrders(e){"undefined"!=typeof table&&table.DataTable().destroy();var t=e.count;table_navs.parentNode.dataset.state=!t||1===table_page&&t<table_page*table_limit?"opage":"mpage",table_navs.dataset.count=t,table_holder.innerHTML=setTable(e.data),"undefined"!=typeof setKalenuxOnoff&&setKalenuxOnoff(),refreshTable(),setNavs()}function detailedTable(){var e,t,a;for(e in $.fn.dataTable.ext.errMode="none","undefined"==typeof table_holder&&(table_holder=document.getElementById("table_holder"),table_navs=document.getElementById("table_navs"),table_filters=document.getElementById("table_filters")),"undefined"==typeof table_order&&(table_order=0),table_sorts={asc:0,desc:1},table_sorts_r={asc:1,desc:0},table_page=1,a=table_filters.dataset.filters.split(","))(e=a[e])&&((e=document.getElementById(e)).onchange=filterTable,"search"==(t=e.dataset.type)?e.onkeydown=tableSearch:"date"==t&&$("#table_date").datepicker({onSelect:function(){filterTable()}}));filterTable()}function filterTable(){setNav("0")}function updateTable(){setNav(table_page)}function tableSearch(e){13==e.keyCode&&(filterTable(),e.preventDefault())}function setDelete(e){setPopup({dataset:{id:e.dataset.id,del_url:table_del_url},text:table_del_text,actions:[{text:"Evet",icon:"icon-boost",onclick:deleteItem},{text:"HayÄ±r",icon:"icon-boost",onclick:closePopup}]})}function deleteItem(){var e=document.getElementById("popup").dataset,t={id:e.id};postJSON(e.del_url,function(e){filterTable(),closePopup()},t)}