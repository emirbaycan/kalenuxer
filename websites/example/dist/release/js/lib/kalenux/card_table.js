var table_start=0,table_limit=12,table_page=1,table_order=[2,"desc"];function setNav(t){var e,a,l,i,n,s,r=table_navs.dataset.count/table_limit;if(table_navs.parentNode.dataset.state=!r||r<=1?"opage":"mpage",e=Math.ceil(r),null!=t){switch(t){case"-2":if(1==table_page)return;table_start=0,l=1;break;case"-1":if(table_start<table_limit)return void(table_start=0);table_start-=table_limit,l=Math.ceil(table_start/table_limit)+1;break;case"0":table_start=0,l=1;break;case"+1":if(e<(l=Math.ceil((table_start+table_limit)/table_limit)+1))return;table_start+=table_limit;break;case"+2":if(table_start=Math.floor(r)*table_limit,l=Math.ceil(table_start/table_limit)+1,table_page==l)return;break;default:table_start=(t-1)*table_limit,l=t}table_page=l,getOrders()}else for(l=table_page,table_navs.innerHTML="",a=l+5,i=l-5,s=1;s<=e;s++)a<s&&s!==e||s<i&&1!==s||(r=document.createElement("li"),s==l?(n=!0,table_navs.parentNode.dataset.page=s!=e?s:-1):n=!1,r.className="page-item "+(n?"active":""),r.innerHTML='<button class="page-link">'+s+"</button>",r.onclick=setNav.bind(null,s),table_navs.appendChild(r))}function getOrders(){var t,e,a,l,i={start:table_start,limit:table_limit};for(t in"undefined"!=typeof specialPosts&&(i=Object.assign({},i,specialPosts())),l=table_filters.dataset.filters.split(","))(t=l[t])&&""!=(e=(t=$("#"+t)).val())&&0!=e&&("limit"==(a=t[0].dataset.name)&&(table_limit=parseInt(e)),i[a]=e);postJSON(table_url,function(t){setOrders(t)},i)}function setOrders(t){table_navs.dataset.count=t.count;var e=t.count;table_navs.parentNode.dataset.state=!e||1===table_page&&e<table_page*table_limit?"opage":"mpage",table_navs.dataset.count=e,1===t.result?table_holder.innerHTML=setTable(t.data):table_holder.innerHTML="",setEvent("onclick","set-action-popup",setActionPopup),setNav()}function cardTable(){var t,e,a;for(t in"undefined"==typeof table_holder&&(table_holder=document.getElementById("table_holder"),table_navs=document.getElementById("table_navs"),table_filters=document.getElementById("table_filters")),a=table_filters.dataset.filters.split(","))(t=a[t])&&((t=document.getElementById(t)).onchange=filterTable,"search"==(e=t.dataset.type)?t.onkeydown=tableSearch:"date"==e&&$("#table_date").datepicker({onSelect:function(){filterTable()}}));filterTable()}function filterTable(){setNav("0")}function updateTable(){setNav(table_page)}function tableSearch(t){13==t.keyCode&&(filterTable(),t.preventDefault())}function setDelete(t){setPopup({dataset:{id:t.dataset.id,del_url:table_del_url},text:table_del_text,actions:[{text:"Evet",icon:"icon-yes",onclick:deleteItem},{text:"HayÄ±r",icon:"icon-no",onclick:closePopup}]})}function deleteItem(){var t=document.getElementById("popup").dataset,e={id:t.id};postJSON(t.del_url,function(t){filterTable(),closePopup()},e)}