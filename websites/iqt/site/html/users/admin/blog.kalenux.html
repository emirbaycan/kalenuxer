<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Management - IQ Test Admin</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
    <div class="admin-container">
        !panel_menu!

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Header -->
            <header class="admin-header">
                <div class="header-left">
                    <h1><i class="fas fa-edit"></i> Blog Management</h1>
                    <p><i class="fas fa-newspaper"></i> Create and manage blog posts for your IQ Test platform</p>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <button class="header-action-btn" title="Notifications">
                            <i class="fas fa-bell"></i>
                            <span class="badge">3</span>
                        </button>
                        <button class="header-action-btn" title="Messages">
                            <i class="fas fa-envelope"></i>
                            <span class="badge">5</span>
                        </button>
                        <button class="header-action-btn" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                    <div class="admin-profile">
                        <div class="admin-profile-info">
                            <span>Admin User</span>
                            <small>Administrator</small>
                        </div>
                        <i class="fas fa-user-circle"></i>
                        <div class="status-indicator"></div>
                        
                        <!-- Profile Dropdown -->
                        <div class="profile-dropdown">
                            <div class="dropdown-header">
                                <div class="dropdown-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="dropdown-name">Admin User</div>
                                <div class="dropdown-email">admin@whats-your-iq.com</div>
                            </div>
                            <div class="dropdown-menu">
                                <a href="/users/admin/profile" class="dropdown-item">
                                    <i class="fas fa-user"></i>
                                    <span>My Profile</span>
                                </a>
                                <a href="/users/admin/settings" class="dropdown-item">
                                    <i class="fas fa-cog"></i>
                                    <span>Account Settings</span>
                                </a>
                                <a href="/users/admin/preferences" class="dropdown-item">
                                    <i class="fas fa-palette"></i>
                                    <span>Preferences</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="/users/admin/help" class="dropdown-item">
                                    <i class="fas fa-question-circle"></i>
                                    <span>Help & Support</span>
                                </a>
                                <a href="/users/admin/activity" class="dropdown-item">
                                    <i class="fas fa-history"></i>
                                    <span>Activity Log</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" id="logout-btn-header" class="dropdown-item danger">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span>Sign Out</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <div class="admin-main-content">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <div class="stat-card-title">Total Posts</div>
                            <div class="stat-card-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                        </div>
                        <div class="stat-card-value" id="total-posts">24</div>
                        <div class="stat-card-change neutral">
                            <i class="fas fa-minus"></i>
                            <span>All content</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-header">
                            <div class="stat-card-title">Published</div>
                            <div class="stat-card-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                        </div>
                        <div class="stat-card-value" id="published-posts">18</div>
                        <div class="stat-card-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>Active posts</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-header">
                            <div class="stat-card-title">Draft</div>
                            <div class="stat-card-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                        </div>
                        <div class="stat-card-value" id="draft-posts">4</div>
                        <div class="stat-card-change neutral">
                            <i class="fas fa-clock"></i>
                            <span>In progress</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-header">
                            <div class="stat-card-title">Categories</div>
                            <div class="stat-card-icon">
                                <i class="fas fa-tags"></i>
                            </div>
                        </div>
                        <div class="stat-card-value" id="total-categories">6</div>
                        <div class="stat-card-change neutral">
                            <i class="fas fa-list"></i>
                            <span>Topics</span>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div class="filters-section">
                    <div class="filters-row">
                        <div class="filter-group">
                            <label for="status-filter" class="form-label">Status:</label>
                            <select id="status-filter" class="form-control form-select">
                                <option value="">All Status</option>
                                <option value="published">Published</option>
                                <option value="draft">Draft</option>
                                <option value="archived">Archived</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="category-filter" class="form-label">Category:</label>
                            <select id="category-filter" class="form-control form-select">
                                <option value="">All Categories</option>
                                <option value="tips">IQ Testing Tips</option>
                                <option value="psychology">Psychology</option>
                                <option value="training">Brain Training</option>
                                <option value="research">Research</option>
                                <option value="news">News</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="search-filter" class="form-label">Search:</label>
                            <input type="text" id="search-filter" class="form-control" placeholder="Search posts...">
                        </div>
                        <div class="filter-group">
                            <label for="limit-filter" class="form-label">Show:</label>
                            <select id="limit-filter" class="form-control form-select">
                                <option value="10">10</option>
                                <option value="20" selected>20</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                        </div>
                        <button id="apply-search" class="btn btn-primary">
                            <i class="fas fa-search"></i> Search
                        </button>
                        <button id="clear-filters" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Clear
                        </button>
                    </div>
                </div>

                <!-- Blog Posts Table -->
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">
                            <i class="fas fa-table"></i>
                            Blog Posts
                        </div>
                        <div class="d-flex gap-2">
                            <button id="add-post-btn" class="btn btn-success">
                                <i class="fas fa-plus"></i> Add Post
                            </button>
                            <button id="export-btn" class="btn btn-outline-primary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button id="refresh-btn" class="btn btn-outline-primary">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    
                    <table id="blog-table" class="admin-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Author</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="blog-table-body">
                            <tr>
                                <td>
                                    <strong>Understanding IQ Tests: A Comprehensive Guide</strong>
                                    <br>
                                    <small class="text-muted">Learn about the fundamentals of IQ testing and how to interpret results.</small>
                                </td>
                                <td>IQ Testing Tips</td>
                                <td>
                                    <span class="status-badge active">
                                        Published
                                    </span>
                                </td>
                                <td>Dr. Smith</td>
                                <td>2024-01-15</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>The Psychology Behind Intelligence Testing</strong>
                                    <br>
                                    <small class="text-muted">Exploring the psychological principles that underlie intelligence assessment.</small>
                                </td>
                                <td>Psychology</td>
                                <td>
                                    <span class="status-badge active">
                                        Published
                                    </span>
                                </td>
                                <td>Dr. Johnson</td>
                                <td>2024-01-12</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Brain Training Exercises for Better Performance</strong>
                                    <br>
                                    <small class="text-muted">Effective exercises to improve cognitive function and test performance.</small>
                                </td>
                                <td>Brain Training</td>
                                <td>
                                    <span class="status-badge pending">
                                        Draft
                                    </span>
                                </td>
                                <td>Admin User</td>
                                <td>2024-01-10</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Post Modal -->
    <div id="post-modal" class="modal">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">Add New Post</h3>
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="post-form">
                        <input type="hidden" id="post-id">
                        
                        <div class="form-row">
                            <div class="form-group col-md-8">
                                <label for="post-title" class="form-label">Post Title *</label>
                                <input type="text" id="post-title" class="form-control" required placeholder="Enter post title">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="post-status" class="form-label">Status *</label>
                                <select id="post-status" class="form-control form-select" required>
                                    <option value="draft">Draft</option>
                                    <option value="published">Published</option>
                                    <option value="archived">Archived</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="post-category" class="form-label">Category *</label>
                                <select id="post-category" class="form-control form-select" required>
                                    <option value="">Select Category</option>
                                    <option value="tips">IQ Testing Tips</option>
                                    <option value="psychology">Psychology</option>
                                    <option value="training">Brain Training</option>
                                    <option value="research">Research</option>
                                    <option value="news">News</option>
                                </select>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="post-author" class="form-label">Author *</label>
                                <input type="text" id="post-author" class="form-control" required placeholder="Author name">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="post-excerpt" class="form-label">Excerpt</label>
                            <textarea id="post-excerpt" class="form-control" rows="3" placeholder="Brief description of the post"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="post-tags" class="form-label">Tags</label>
                            <input type="text" id="post-tags" class="form-control" placeholder="Separate tags with commas">
                            <small class="text-muted">Example: IQ test, cognitive, psychology</small>
                        </div>

                        <div class="form-group">
                            <label for="post-image" class="form-label">Featured Image URL</label>
                            <input type="url" id="post-image" class="form-control" placeholder="https://example.com/image.jpg">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Content *</label>
                            <div id="editor-container" class="quill-container"></div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="post-meta-title" class="form-label">Meta Title</label>
                                <input type="text" id="post-meta-title" class="form-control" placeholder="SEO title">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="post-meta-description" class="form-label">Meta Description</label>
                                <input type="text" id="post-meta-description" class="form-control" placeholder="SEO description">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="savePost()">
                        <i class="fas fa-save"></i> Save Post
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Confirm Delete</h3>
                    <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this post? This action cannot be undone.</p>
                    <p><strong id="delete-post-title"></strong></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <!-- Quill Editor -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    
    <script>
        // Wrapper functions to maintain onclick compatibility
        function closeModal() { blogManager.closeModal(); }
        function savePost() { blogManager.savePost(); }
        function closeDeleteModal() { blogManager.closeDeleteModal(); }
        function confirmDelete() { blogManager.confirmDelete(); }
        function editPost(id) { blogManager.editPost(id); }
        function deletePost(id) { blogManager.deletePost(id); }
    </script>
</body>
</html>

